!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){i(this,e),this.pressing=[],this.lastPress=null,this.x=0,this.y=0,this.KEY_LEFT=37,this.KEY_UP=38,this.KEY_RIGHT=39,this.KEY_DOWN=40,this.KEY_ENTER=13,this.KEY_SPACE=32}return r(e,[{key:"listen",value:function(){var e=this;document.addEventListener("keyup",function(t){e.pressing[t.keyCode]=!1},!1),document.addEventListener("keydown",function(t){e.lastPress=t.keyCode,e.pressing[t.keyCode]=!0},!1)}}]),e}();t.KeyBoard=new s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){i(this,e)}return r(e,null,[{key:"max",value:function(e){return Math.floor(Math.random()*e)}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=document.getElementById("canvas"),r=i.getContext("2d");console.log("Arena Created"),t.canvas=i,t.ctx=r},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t,n,r,s){i(this,e),this.x=void 0===t?0:t,this.y=void 0===n?0:n,this.width=void 0===r?0:r,this.height=void 0===s?this.width:s}return r(e,[{key:"intersects",value:function(e){if(void 0!==e)return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y;window.console.warn("Missing parameters on function intersects")}},{key:"rectCollision",value:function(e){if(void 0!==e)return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y;window.console.warn("Missing parameters on function intersects")}},{key:"fill",value:function(e){void 0===e?window.console.warn("Missing parameters on function fill"):e.fillRect(this.x,this.y,this.width,this.height)}},{key:"drawImage",value:function(e,t){void 0===t?window.console.warn("Missing parameters on function drawImage"):t.width?e.drawImage(t,this.x,this.y):e.strokeRect(this.x,this.y,this.width,this.height)}},{key:"drawImageArea",value:function(e,t,n,i,r,s){t.width?e.drawImage(t,n,i,r,s,this.x,this.y,this.width,this.height):e.strokeRect(this.x,this.y,this.width,this.height)}}]),e}();t.default=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(3),u=function(e){return e&&e.__esModule?e:{default:e}}(o),l=(n(0),function(e){function t(e,n,s,a){i(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,s,a));return o.timer=0,o}return s(t,e),a(t,[{key:"update",value:function(){this.moveShots()}},{key:"moveShots",value:function(){this.y-=10}}]),t}(u.default));t.default=l},function(e,t,n){"use strict";var i=n(0),r=n(6),s=function(e){return e&&e.__esModule?e:{default:e}}(r);window.onload=function(){var e=new s.default;i.KeyBoard.listen(),e.init()}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(1),o=i(a),u=n(7),l=i(u),c=n(0),h=n(2),f=n(8),y=i(f),p=n(9),d=i(p),v=n(4),g=(i(v),n(10)),w=i(g),m=n(11),b=n(12),x=function(){function e(){r(this,e),this.state=null,this.player1=null,this.stars=[],this.spritesheet=new Image,this.highscores=[],localStorage.setItem("highscores",JSON.stringify(this.highscores)),this.storedHighScores=JSON.parse(localStorage.getItem("highscores")),this.spritesheet.src="../../shipsEcma6/src/assets/spritesheet.png"}return s(e,[{key:"init",value:function(){this.createArena(),this.update()}},{key:"checkState",value:function(){var e="pause"===this.state;if(c.KeyBoard.lastPress===c.KeyBoard.KEY_ENTER){var t="playing"===this.state,n="over"===this.state;e?this.state="playing":t?this.state="pause":n&&(this.createArena(),this.state="playing")}e&&(h.ctx.textAlign="center",h.ctx.fillStyle="white",h.ctx.fillText("PAUSE",150,75),h.ctx.textAlign="left")}},{key:"update",value:function(){this.checkScene(),this.checkState(),this.render(),this.resume(),this.pause(),setTimeout(this.update.bind(this),40)}},{key:"checkScene",value:function(){var e=c.KeyBoard.lastPress===c.KeyBoard.KEY_ENTER;"main"===this.scene?((0,m.paintMainScene)(h.ctx),e&&(this.scene="playing",c.KeyBoard.lastPress=null)):0==this.player1.health&&(this.scene="gameover","playing"===this.state&&(this.highscores.push(this.player1.score),localStorage.setItem("highscores",JSON.stringify(this.highscores)),this.storedHighScores=JSON.parse(localStorage.getItem("highscores")),this.storedHighScores=l.default.Order(this.highscores)),this.state="over",(0,b.paintHighScoresScene)(h.ctx,this.storedHighScores),e&&(this.scene="playing",this.state="playing",this.createArena(),c.KeyBoard.lastPress=null))}},{key:"pause",value:function(){c.KeyBoard.lastPress=null}},{key:"render",value:function(){if("playing"===this.scene){h.ctx.fillStyle="#000",h.ctx.fillRect(0,0,h.canvas.width,h.canvas.height);for(var e=0;e<200;e++)this.stars[e].render(h.ctx);this.player1.drawImageArea(h.ctx,this.spritesheet,0,0,10,10);for(var e=0,t=this.enemies.length;e<t;e++)this.enemies[e].drawImageArea(h.ctx,this.spritesheet,30,0,10,10);h.ctx.fillStyle="white";for(var e=0,t=this.player1.shots.length;e<t;e++)this.player1.shots[e].drawImageArea(h.ctx,this.spritesheet,70,0,10,10);h.ctx.fillStyle="#fff",h.ctx.textAlign="left",h.ctx.fillText("Score: "+this.player1.score,10,20),h.ctx.fillStyle="#fff",h.ctx.textAlign="left",h.ctx.fillText("Lives: "+this.player1.health,h.canvas.width-45,20),"pause"===this.state&&(h.ctx.textAlign="center",h.ctx.fillStyle="white",h.ctx.fillText("PAUSE",150,75),h.ctx.textAlign="left")}}},{key:"resume",value:function(){if("playing"===this.state&&"playing"==this.scene){this.player1.update();for(var e=0,t=this.player1.shots.length;e<t;e++)this.player1.shots[e].update();for(var e=0,t=this.enemies.length;e<t;e++){this.enemies[e].update(this.player1);for(var n=0,i=this.player1.shots.length;n<i;n++)this.player1.shots[n].rectCollision(this.enemies[e])&&(this.enemies[e].health--,this.player1.shots.splice(n--,1),i--,0==this.enemies[e].health?(this.player1.score++,this.enemies[e].x=10*o.default.max(h.canvas.width/10),this.enemies[e].y=0,this.enemies[e].health=2,this.enemies.push(new d.default(10*o.default.max(h.canvas.width/10),0,10,10))):this.enemies[e].timer=1)}for(var e=0,t=this.stars.length;e<t;e++)this.stars[e].update()}}},{key:"createArena",value:function(){this.scene="main",this.player1=new y.default(90,290,10,10,3),this.enemies=[],this.enemies.push(new d.default(10,20,10,10)),this.enemies.push(new d.default(30,20,10,10)),this.enemies.push(new d.default(50,20,10,10)),this.enemies.push(new d.default(80,0,10,10)),this.enemies.push(new d.default(100,0,10,10)),this.enemies.push(new d.default(120,0,10,10)),this.enemies.push(new d.default(150,20,10,10)),this.enemies.push(new d.default(170,20,10,10)),this.enemies.push(new d.default(190,20,10,10));for(var e=0;e<200;e++){var t=o.default.max(h.canvas.width),n=o.default.max(h.canvas.height),i=new w.default(t,n);this.stars.push(i)}this.state="playing"}}]),e}();t.default=x},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){i(this,e)}return r(e,null,[{key:"Order",value:function(e){return e.sort(function(e,t){return t-e}),e}}]),e}();t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(3),l=i(u),c=n(0),h=n(4),f=i(h),y=function(e){function t(e,n,i,a,o){r(this,t);var u=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,a,o));return u.health=void 0===o?1:o,u.timer=0,u.shots=[],u.multiShot=1,u.score=0,u.state="",u}return a(t,e),o(t,[{key:"update",value:function(){this.movePlayer(),this.checkStatus()}},{key:"movePlayer",value:function(){c.KeyBoard.pressing[c.KeyBoard.KEY_UP]&&(this.y-=10),c.KeyBoard.pressing[c.KeyBoard.KEY_RIGHT]&&(this.x+=10),c.KeyBoard.pressing[c.KeyBoard.KEY_DOWN]&&(this.y+=10),c.KeyBoard.pressing[c.KeyBoard.KEY_LEFT]&&(this.x-=10),c.KeyBoard.lastPress==c.KeyBoard.KEY_SPACE&&(this.shots.push(new f.default(this.x+3,this.y,5,5)),c.KeyBoard.lastPress=null),c.KeyBoard.lastPress==c.KeyBoard.KEY_SPACE&&(this.shots.push(new f.default(this.x+3,this.y,5,5)),c.KeyBoard.lastPress=null)}},{key:"checkStatus",value:function(){this.x>canvas.width-10&&(this.x=canvas.width-10),this.x<0&&(this.x=0),this.y>canvas.height-10&&(this.y=canvas.height-10),this.y<0&&(this.y=0),this.timer>0&&(this.timer=this.timer-1),0==this.health&&(this.alive=!1)}},{key:"checkPowerUp",value:function(e){for(var t=0,n=powerups.length;t<n;t++)powerups[t].y+=5,powerups[t].y>canvas.height?(powerups.splice(t--,1),n--):this.intersects(powerups[t])&&(1==powerups[t].type&&this.multiShot<3?this.multiShot++:this.score+=5,powerups.splice(t--,1),n--)}}]),t}(l.default);t.default=y},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(3),l=i(u),c=n(1),h=i(c),f=n(2),y=(i(f),function(e){function t(e,n,i,a){r(this,t);var o=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,a));return o.health=2,o.timer=0,o}return a(t,e),o(t,[{key:"init",value:function(){}},{key:"update",value:function(e){this.moveEnemy(),this.checkIntersect(e)}},{key:"checkIntersect",value:function(e){e.intersects(this)&&0==e.timer&&(e.health=e.health-1,e.timer=20)}},{key:"moveEnemy",value:function(){this.y+=2,this.timer>0&&this.timer--,this.y>canvas.height&&(this.x=10*h.default.max(canvas.width/10),this.y=0)}}]),t}(l.default));t.default=y},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(2),o=(i(a),n(1)),u=i(o),l=function(){function e(t,n){r(this,e),this.x=null==t?0:t,this.y=null==n?0:n}return s(e,[{key:"init",value:function(){++this.y>canvas.height&&(this.y=0)}},{key:"update",value:function(){this.moveStars()}},{key:"moveStars",value:function(){this.y+=.5,this.timer>0&&this.timer--,this.y>canvas.height&&(this.x=10*u.default.max(canvas.width/10),this.y=0)}},{key:"render",value:function(e){e.fillStyle="#fff",e.fillRect(this.x,this.y,1,1)}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){e.fillStyle="black",e.fillRect(0,0,canvas.width,canvas.height),e.fillStyle="#fff",e.textAlign="center",e.fillText("SHIPS",100,125),e.fillText("Press Enter",100,175)};t.paintMainScene=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){e.fillStyle="black",e.fillRect(0,0,canvas.width,canvas.height),e.fillStyle="#fff",e.textAlign="center",e.fillText("Game Over",100,20),e.fillText("HIGH SCORE",100,40),e.textAlign="right";for(var n=0,i=t.length;n<i;n+=1)10===n?e.fillText("->   "+t[n],100,60+10*n):e.fillText(t[n],100,60+10*n)};t.paintHighScoresScene=i}]);